# Server Configuration
# Render sets PORT environment variable - use it if available, otherwise default to 8082
server.port=${PORT:8082}

# MongoDB Atlas Configuration
# IMPORTANT: Use environment variable for production
# Set MONGODB_URI environment variable in your deployment platform
spring.data.mongodb.uri=${MONGODB_URI:mongodb+srv://2211cs030091:abcd1234@cluster0.ocngt.mongodb.net/petmanagement?retryWrites=true&w=majority&appName=Cluster0&authSource=admin}
# Explicitly set database name (required for Spring Boot to work correctly)
spring.data.mongodb.database=${MONGODB_DATABASE:petmanagement}
spring.data.mongodb.auto-index-creation=true

# Security Configuration
spring.security.filter.order=10
# IMPORTANT: Use environment variables for production
spring.security.user.name=${ADMIN_USERNAME:admin}
spring.security.user.password=${ADMIN_PASSWORD:admin}

# JWT Configuration
# IMPORTANT: Use environment variable for production - generate a secure secret
jwt.secret=${JWT_SECRET:404E635266556A586E3272357538782F413F4428472B4B6250645367566B5970}
jwt.expiration=86400000
jwt.refresh-expiration=86400000

# CORS Configuration
# IMPORTANT: Update with your Vercel frontend URL for production
spring.web.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:5173,https://pet-connect-psi.vercel.app}
spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS,HEAD
spring.web.cors.allowed-headers=*
spring.web.cors.allow-credentials=true
spring.web.cors.max-age=3600

# Database Configuration
spring.datasource.url=jdbc:mysql://localhost:3306/petconnect?createDatabaseIfNotExist=true&useSSL=false&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=${JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.format_sql=true

# File Upload Configuration
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=5MB
file.upload-dir=uploads

# Static Resource Configuration
spring.web.resources.static-locations=file:uploads/,classpath:/static/
spring.mvc.static-path-pattern=/uploads/**

# Logging Configuration (use INFO in production, DEBUG in development)
logging.level.org.springframework.security=${LOG_LEVEL_SECURITY:INFO}
logging.level.org.springframework.web=${LOG_LEVEL_WEB:INFO}
logging.level.com.example.petmanagement=${LOG_LEVEL_APP:INFO}
logging.level.org.hibernate.SQL=${LOG_LEVEL_HIBERNATE_SQL:WARN}
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=${LOG_LEVEL_HIBERNATE_BINDER:WARN}

# Disable JPA auto-configuration
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration

# Spring Boot DevTools (disabled in production)
spring.devtools.restart.enabled=${SPRING_DEVTOOLS_RESTART_ENABLED:false}
spring.devtools.livereload.enabled=${SPRING_DEVTOOLS_LIVERELOAD_ENABLED:false}

# Allow bean definition overriding
spring.main.allow-bean-definition-overriding=true

# Server error handling
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=never

# Enable JPA auto-configuration
spring.jpa.open-in-view=true 